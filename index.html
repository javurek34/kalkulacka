<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Investiční model s nárůstem platu</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-gray-100 font-sans p-4">

    <div class="max-w-7xl mx-auto bg-white rounded-2xl shadow-2xl overflow-hidden">
        <div class="bg-slate-900 p-6 text-white text-center">
            <h1 class="text-3xl font-bold tracking-tight">Finanční Simulátor 2026</h1>
            <p class="text-slate-400 mt-1">Plánování bohatství s dynamickými vklady a inflací</p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-4">
            <div class="lg:col-span-1 p-6 bg-slate-50 border-r border-slate-200 space-y-4">
                <h2 class="text-lg font-bold text-slate-800 border-b pb-2">Základní parametry</h2>
                
                <div>
                    <label class="block text-xs font-bold text-slate-500 uppercase">Počáteční investice</label>
                    <input type="number" id="initial" value="50000" class="w-full mt-1 p-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none">
                </div>

                <div>
                    <label class="block text-xs font-bold text-slate-500 uppercase">Startovní měsíční vklad</label>
                    <input type="number" id="monthly" value="3000" class="w-full mt-1 p-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none">
                </div>

                <div class="grid grid-cols-2 gap-2">
                    <div>
                        <label class="block text-xs font-bold text-slate-500 uppercase">Úrok (% p.a.)</label>
                        <input type="number" id="rate" value="7" step="0.1" class="w-full mt-1 p-2 border rounded-lg outline-none">
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-slate-500 uppercase">Horizont (let)</label>
                        <input type="number" id="years" value="30" class="w-full mt-1 p-2 border rounded-lg outline-none">
                    </div>
                </div>

                <div>
                    <label class="block text-xs font-bold text-slate-500 uppercase">Připisování úroku</label>
                    <select id="compounding" class="w-full mt-1 p-2 border rounded-lg bg-white outline-none">
                        <option value="12">Měsíčně (Složené)</option>
                        <option value="1">Ročně</option>
                    </select>
                </div>

                <div class="pt-4 mt-4 border-t border-slate-200">
                    <h2 class="text-lg font-bold text-indigo-700 pb-2">Kariérní růst</h2>
                    <div class="space-y-3 p-3 bg-indigo-50 rounded-xl border border-indigo-100">
                        <div>
                            <label class="block text-[10px] font-bold text-indigo-900 uppercase">Každých X let dojít k růstu</label>
                            <input type="number" id="stepYears" value="4" class="w-full mt-1 p-2 border rounded-lg outline-none">
                        </div>
                        <div>
                            <label class="block text-[10px] font-bold text-indigo-900 uppercase">Plat stoupne o (Kč/měsíc)</label>
                            <input type="number" id="salaryBump" value="5000" class="w-full mt-1 p-2 border rounded-lg outline-none">
                        </div>
                        <div>
                            <label class="block text-[10px] font-bold text-indigo-900 uppercase">Zvýšit vklad o (%)</label>
                            <input type="number" id="investIncrease" value="20" class="w-full mt-1 p-2 border rounded-lg outline-none">
                        </div>
                    </div>
                </div>

                <div>
                    <label class="block text-xs font-bold text-slate-500 uppercase">Inflace (% p.a.)</label>
                    <input type="number" id="inflation" value="3" step="0.1" class="w-full mt-1 p-2 border rounded-lg outline-none">
                </div>

                <button onclick="calculate()" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 rounded-xl shadow-lg transition-all active:scale-95 mt-4">
                    PŘEPOČÍTAT MODEL
                </button>
            </div>

            <div class="lg:col-span-3 p-8 bg-white">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <div class="bg-slate-50 p-6 rounded-2xl border border-slate-100">
                        <p class="text-sm font-medium text-slate-500">Nominální výsledek</p>
                        <p id="statNominal" class="text-3xl font-black text-indigo-600">0 Kč</p>
                    </div>
                    <div class="bg-slate-50 p-6 rounded-2xl border border-slate-100">
                        <p class="text-sm font-medium text-slate-500">Celkové vklady</p>
                        <p id="statInvested" class="text-3xl font-black text-emerald-600">0 Kč</p>
                    </div>
                    <div class="bg-slate-50 p-6 rounded-2xl border border-slate-100">
                        <p class="text-sm font-medium text-slate-500">Reálná hodnota dnes</p>
                        <p id="statReal" class="text-3xl font-black text-orange-500">0 Kč</p>
                    </div>
                </div>

                <div class="h-[500px] w-full">
                    <canvas id="mainChart"></canvas>
                </div>

                <div class="mt-8 p-4 bg-yellow-50 border-l-4 border-yellow-400 rounded-r-lg text-sm text-yellow-800">
                    <strong>Tip:</strong> Sledujte rozdíl mezi modrou (nominální) a oranžovou (reálnou) křivkou. Oranžová křivka ukazuje, co si za naspořené peníze skutečně koupíte v dnešních cenách.
                </div>
            </div>
        </div>
    </div>

    <script>
        let chartInstance;

        function czk(val) {
            return new Intl.NumberFormat('cs-CZ', { style: 'currency', currency: 'CZK', maximumFractionDigits: 0 }).format(val);
        }

        function calculate() {
            const initial = parseFloat(document.getElementById('initial').value) || 0;
            let monthly = parseFloat(document.getElementById('monthly').value) || 0;
            const rate = parseFloat(document.getElementById('rate').value) / 100;
            const years = parseInt(document.getElementById('years').value) || 0;
            const compounding = parseInt(document.getElementById('compounding').value);
            const inflation = parseFloat(document.getElementById('inflation').value) / 100;
            
            const stepYears = parseInt(document.getElementById('stepYears').value) || 1;
            const salaryBump = parseFloat(document.getElementById('salaryBump').value) || 0; // Info hodnota
            const investIncrease = parseFloat(document.getElementById('investIncrease').value) / 100;

            let balance = initial;
            let totalInvested = initial;
            
            let dataNominal = [];
            let dataInvested = [];
            let dataReal = [];
            let labels = [];

            for (let y = 0; y <= years; y++) {
                // Uložit stav na začátku roku (nebo po úrocích z minulého)
                let currentReal = balance / Math.pow(1 + inflation, y);
                
                labels.push("Rok " + y);
                dataNominal.push(Math.round(balance));
                dataInvested.push(Math.round(totalInvested));
                dataReal.push(Math.round(currentReal));

                if (y < years) {
                    // Měsíční cyklus uvnitř roku
                    for (let m = 1; m <= 12; m++) {
                        if (compounding === 12) {
                            balance *= (1 + (rate / 12));
                        }
                        balance += monthly;
                        totalInvested += monthly;
                    }

                    // Roční připsání úroku
                    if (compounding === 1) {
                        balance *= (1 + rate);
                    }

                    // Logika skokového navýšení
                    if ((y + 1) % stepYears === 0) {
                        // Zvýšíme měsíční vklad o zadané procento
                        monthly *= (1 + investIncrease);
                    }
                }
            }

            // Update statistik
            document.getElementById('statNominal').innerText = czk(balance);
            document.getElementById('statInvested').innerText = czk(totalInvested);
            document.getElementById('statReal').innerText = czk(balance / Math.pow(1 + inflation, years));

            // Graf
            const ctx = document.getElementById('mainChart').getContext('2d');
            if (chartInstance) chartInstance.destroy();

            chartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: 'Nominální stav konta',
                            data: dataNominal,
                            borderColor: '#4f46e5',
                            backgroundColor: 'rgba(79, 70, 229, 0.1)',
                            fill: true,
                            tension: 0.2
                        },
                        {
                            label: 'Celkem investováno',
                            data: dataInvested,
                            borderColor: '#10b981',
                            borderWidth: 2,
                            fill: false
                        },
                        {
                            label: 'Reálná hodnota (dnešní ceny)',
                            data: dataReal,
                            borderColor: '#f59e0b',
                            borderDash: [5, 5],
                            fill: false
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: { mode: 'index', intersect: false },
                    scales: {
                        y: { ticks: { callback: v => czk(v) } }
                    },
                    plugins: {
                        tooltip: {
                            callbacks: { label: c => c.dataset.label + ': ' + czk(c.raw) }
                        }
                    }
                }
            });
        }

        window.onload = calculate;
    </script>
</body>
</html>
